# Whimsy — Daily Loving Email

This simple Python app sends an email every morning at 08:00 local time telling your "Queen of Whimsies" she is beautiful and that you love her.

Files:
- `whimsy.py` — main script
- `requirements.txt` — Python dependencies
- `.env.example` — example env vars

Setup:
1. Create a virtualenv and install dependencies:

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

2. Copy `.env.example` to `.env` and fill in your SMTP credentials, or export equivalent environment variables.

Running:
- Send once immediately:

```bash
python whimsy.py --send-now
```

- Run persistent scheduler (keeps running, sends daily at 08:00):

```bash
python whimsy.py --run
```

Scheduling options:
- Cron (run the one-shot every morning at 08:00):

```cron
0 8 * * * /path/to/.venv/bin/python /path/to/whimsy.py --send-now
```

- macOS launchd (preferred on macOS) — create a plist that runs the above command at 08:00 daily.

Security:
- Use application-specific passwords if using providers like Gmail.
- Do not commit real credentials to version control.

If you want, I can create a `launchd` plist or a sample `crontab` entry for you.

Installer script and one-shot runner
-----------------------------------

This repo includes two helper scripts to simplify scheduling and sending:

- `install_whimsy.sh` — Generate and optionally install a macOS `launchd` plist or a `crontab` entry that runs the one-shot sender daily at the chosen time.
- `send_once.sh` — Run the `whimsy.py --send-now` command once, sourcing `.env` and using the `.venv` python if present.

Examples:

- Write (but do not install) a `launchd` plist for daily 08:00 using a specific python:

```bash
./install_whimsy.sh --launchd --project-dir /path/to/vicenta --python /path/to/.venv/bin/python --time 08:00
```

- Write and install the `launchd` plist (loads it into `launchctl`):

```bash
./install_whimsy.sh --launchd --install --project-dir /path/to/vicenta --python /path/to/.venv/bin/python --time 08:00
```

- Create and install a crontab entry that runs at 08:00 daily:

```bash
./install_whimsy.sh --cron --install --project-dir /path/to/vicenta --python /path/to/.venv/bin/python --time 08:00
```

- Run the one-shot sender locally (uses `.env` if present):

```bash
chmod +x send_once.sh
./send_once.sh /path/to/vicenta /path/to/.venv/bin/python
```

Notes:
- On macOS `launchd` is the recommended scheduler for user-level periodic jobs. The plist generated by `install_whimsy.sh` is written to `~/Library/LaunchAgents`.
- If you prefer `cron`, the script can append a safe entry to your crontab and install it for you.
- Ensure `.env` contains your SMTP credentials and `FROM_EMAIL`/`TO_EMAIL` before running the one-shot sender.

Want me to also commit and load the plist for you now (I can only write files here; you'll need to run the installer command locally)?
